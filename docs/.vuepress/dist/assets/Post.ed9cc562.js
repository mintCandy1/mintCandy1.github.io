import{_ as M,e as N,u as $,i as z,a3 as W,r as V,o as s,c as r,h as e,E as S,v as c,b as u,I as q,J as j,f as m,w as y,d as A,t as n,x as T,g as _,y as R,S as J,V as O,j as U,k as P,C as Y,n as G,D as K,a4 as Q,A as X,B as Z,T as ee}from"./app.9eb88680.js";import{f as te}from"./resolveTime.bbe121e0.js";import{C as ae}from"./Common.d0cb3e95.js";import{u as se,P as oe,C as re,a as ne}from"./Catalog.4a4eeafb.js";import{P as ce}from"./Pager.bd53e0f3.js";import"./Sidebar.07865d1f.js";import"./PageNav.a84dccc8.js";const le={class:"article-header-content"},ie={key:0,class:"article-tags"},de={class:"article-title"},ue={key:1,class:"article-subtitle"},ge={class:"article-icons"},he={key:0,class:"article-icon"},pe={key:1,class:"article-icon"},me={key:2,class:"article-icon"},_e={key:1,class:"article-image-credit"},ve=["href"],fe={key:1},ke=N({__name:"ArticleHeader",props:{currentTag:{type:String,default:""}},setup(b){const g=$(),t=z(),v=R(),f=W(),x=i=>f.value.map[i].path,C=()=>{const i={};return t.value.layout==="Post"&&t.value.useHeaderImage&&t.value.headerImage&&(i.backgroundImage=`url(${J(t.value.headerImage)})`),i},h=g.value.personalInfo;return(i,I)=>{const p=V("RouterLink"),a=V("VIcon");return s(),r("div",{class:T(["article-header",{"use-image":e(t).useHeaderImage}]),style:S(C())},[e(t).useHeaderImage&&e(t).headerMask?(s(),r("div",{key:0,class:"article-header-mask",style:S({background:e(t).headerMask})},null,4)):c("",!0),u("div",le,[e(t).tags?(s(),r("div",ie,[(s(!0),r(q,null,j(e(t).tags,(d,k)=>(s(),m(p,{key:k,class:T(["article-tag",{active:b.currentTag==d}]),to:x(d)},{default:y(()=>[A(n(d),1)]),_:2},1032,["class","to"]))),128))])):c("",!0),u("h1",de,n(e(t).title),1),e(t).subtitle?(s(),r("p",ue,n(e(t).subtitle),1)):c("",!0),u("div",ge,[e(t).author||e(h).name?(s(),r("div",he,[_(a,{name:"fa-regular-user"}),u("span",null,n(e(t).author||e(h).name),1)])):c("",!0),e(t).date?(s(),r("div",pe,[_(a,{name:"fa-regular-calendar"}),u("span",null,n(e(te)(e(t).date)),1)])):c("",!0),e(v).readingTime?(s(),r("div",me,[_(a,{name:"ri-timer-line"}),u("span",null,n(e(v).readingTime.minutes)+" min",1)])):c("",!0)])]),e(t).useHeaderImage&&e(t).headerImageCredit?(s(),r("div",_e,[A(n(e(g).headerImageCredit)+" ",1),e(t).headerImageCreditLink?(s(),r("a",{key:0,href:e(t).headerImageCreditLink,target:"_blank",rel:"noopener noreferrer"},n(e(t).headerImageCredit),9,ve)):(s(),r("span",fe,n(e(t).headerImageCredit),1))])):c("",!0)],6)}}});var ye=M(ke,[["__file","ArticleHeader.vue"]]);const Te=N({__name:"Post",setup(b){const g=R(),t=O(),v=U(),f=ne(),x=f.resolve,C=f.pending,h=se(),i=P(()=>h.value?g.value.headers:[]),I=o=>o.children.length>0?[o].concat(...o.children.map(I)):o,p=P(()=>[].concat(...i.value.map(I))),a=Y({headerHeight:0,screenWidth:0,catalogTop:0,activeLink:"",isFixed:!1}),d=40,k=80,H=()=>{for(let l=p.value.length-1;l>=0;l--){const D=p.value[l].slug,F=document.querySelector(`#${D}`);if((F?F.getBoundingClientRect().top:0)<=100){a.activeLink=D;break}}window.pageYOffset>a.headerHeight+d-k?(a.isFixed=!0,a.catalogTop=k):(a.isFixed=!1,a.catalogTop=a.headerHeight+d)},L=()=>{const o=document.querySelector(".post-header");a.headerHeight=o?o.offsetHeight:0,a.screenWidth=document.body.clientWidth,a.catalogTop=a.headerHeight+d};let E;G(()=>{window.addEventListener("scroll",H),L(),window.onresize=()=>(()=>{L(),H()})(),E=v.afterEach(()=>{L()})}),K(()=>{window.removeEventListener("scroll",H),E()});const{post:w}=Q(),B=P(()=>{if(!w.value)return{};const o=w.value.info.next;o&&(o.text=t.value.postNext);const l=w.value.info.prev;return l&&(l.text=t.value.postPrev),{next:o,prev:l}});return(o,l)=>(s(),m(ae,null,{page:y(()=>[_(ee,{name:"fade-slide-y",mode:"out-in",onBeforeEnter:e(x),onBeforeLeave:e(C)},{default:y(()=>[u("div",{class:T(["post-wrapper",{"show-catalog":e(h)}])},[X(_(ye,{class:"post-header"},null,512),[[Z,e(g).title]]),(s(),m(oe,{key:e(g).path,class:"post-content"},{bottom:y(()=>[e(B).next||e(B).prev?(s(),m(ce,{key:0,data:e(B)},null,8,["data"])):c("",!0)]),_:1})),e(h)?(s(),m(e(re),{key:0,headers:e(p),"active-link":a.activeLink,class:T({fixed:a.isFixed}),style:S({top:`${a.catalogTop}px`})},null,8,["headers","active-link","class","style"])):c("",!0)],2)]),_:1},8,["onBeforeEnter","onBeforeLeave"])]),_:1}))}});var Se=M(Te,[["__scopeId","data-v-5a5175c2"],["__file","Post.vue"]]);export{Se as default};
