import{_ as F,e as A,V as N,i as R,W as z,r as D,o,c as r,h as e,E as P,v as c,b as g,I as J,J as q,f as I,w as h,d as x,t as n,x as $,g as _,y as M,S as O,j,k as E,C as U,n as W,X,H as Z,D as G,p as V,A as K,B as Q,s as C,T as Y}from"./app.9eb88680.js";import{C as ee}from"./Common.aeefdae8.js";import{u as te,P as ae,C as oe,a as se}from"./Catalog.4a4eeafb.js";import"./Sidebar.07865d1f.js";import"./PageNav.a84dccc8.js";const re=v=>{const i=new Date(v).toJSON();return new Date(+new Date(i)+8*3600*1e3).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").split(" ")[0]},ne={class:"article-header-content"},le={key:0,class:"article-tags"},ce={class:"article-title"},ie={key:1,class:"article-subtitle"},de={class:"article-icons"},ue={key:0,class:"article-icon"},ge={key:1,class:"article-icon"},he={key:2,class:"article-icon"},pe={key:1,class:"article-image-credit"},me=["href"],_e={key:1},ve=A({__name:"ArticleHeader",props:{currentTag:{type:String,default:""}},setup(v){const i=N(),t=R(),f=M(),k=z(),S=l=>{var d;return(d=k.value.map[l])==null?void 0:d.path},T=()=>{const l={};return t.value.layout==="Post"&&t.value.useHeaderImage&&t.value.headerImage&&(l.backgroundImage=`url(${O(t.value.headerImage)})`),l},y=i.value.personalInfo;return(l,d)=>{const s=D("RouterLink"),u=D("VIcon");return o(),r("div",{class:$(["article-header",{"use-image":e(t).useHeaderImage}]),style:P(T())},[e(t).useHeaderImage&&e(t).headerMask?(o(),r("div",{key:0,class:"article-header-mask",style:P({background:e(t).headerMask})},null,4)):c("",!0),g("div",ne,[e(t).tags?(o(),r("div",le,[(o(!0),r(J,null,q(e(t).tags,(p,m)=>(o(),I(s,{key:m,class:$(["article-tag",{active:v.currentTag==p}]),to:S(p)},{default:h(()=>[x(n(p),1)]),_:2},1032,["class","to"]))),128))])):c("",!0),g("h1",ce,n(e(t).title),1),e(t).subtitle?(o(),r("p",ie,n(e(t).subtitle),1)):c("",!0),g("div",de,[e(t).author||e(y).name?(o(),r("div",ue,[_(u,{name:"fa-regular-user"}),g("span",null,n(e(t).author||e(y).name),1)])):c("",!0),e(t).date?(o(),r("div",ge,[_(u,{name:"fa-regular-calendar"}),g("span",null,n(e(re)(e(t).date)),1)])):c("",!0),e(f).readingTime?(o(),r("div",he,[_(u,{name:"ri-timer-line"}),g("span",null,n(e(f).readingTime.minutes)+" min",1)])):c("",!0)])]),e(t).useHeaderImage&&e(t).headerImageCredit?(o(),r("div",pe,[x(n(e(i).headerImageCredit)+" ",1),e(t).headerImageCreditLink?(o(),r("a",{key:0,href:e(t).headerImageCreditLink,target:"_blank",rel:"noopener noreferrer"},n(e(t).headerImageCredit),9,me)):(o(),r("span",_e,n(e(t).headerImageCredit),1))])):c("",!0)],6)}}});var fe=F(ve,[["__file","ArticleHeader.vue"]]);const ke={class:"post-wrapper"},ye=A({__name:"Layout",setup(v){const i=se(),t=i.resolve,f=i.pending,k=te(),S=j(),T=M(),y=E(()=>k.value?[]:T.value.headers),l=a=>a.children.length>0?[a].concat(...a.children.map(l)):a,d=E(()=>[].concat(...y.value.map(l))),s=U({headerHeight:0,catalogTop:0,activeLink:"",isFixed:!1}),u=40,p=80,m=()=>{const a=document.querySelector(".article-header");s.headerHeight=(a==null?void 0:a.offsetHeight)||0,s.catalogTop=s.headerHeight+u};let B;return W(()=>{const{y:a}=X(document),H=()=>{for(let L=d.value.length-1;L>=0;L--){const b=d.value[L].slug,w=document.querySelector(`#${b}`);if((w?w.getBoundingClientRect().top:0)<=100){s.activeLink=b;break}}a.value>s.headerHeight+u-p?(s.isFixed=!0,s.catalogTop=p):(s.isFixed=!1,s.catalogTop=s.headerHeight+u)};Z(a,H),m(),B=S.afterEach(m),window.onresize=()=>{m(),H()}}),G(()=>{B()}),(a,H)=>(o(),I(ee,null,{page:h(()=>[_(Y,{name:"fade-slide-y",mode:"out-in",onBeforeEnter:e(t),onBeforeLeave:e(f)},{default:h(()=>[g("div",ke,[(o(),I(ae,{key:e(V).path},{top:h(()=>[K(_(fe,null,null,512),[[Q,e(V).title]]),C(a.$slots,"page-top",{},void 0,!0)]),"content-top":h(()=>[C(a.$slots,"page-content-top",{},void 0,!0)]),"content-bottom":h(()=>[C(a.$slots,"page-content-bottom",{},void 0,!0)]),bottom:h(()=>[C(a.$slots,"page-bottom",{},void 0,!0)]),_:3})),e(k)?c("",!0):(o(),I(e(oe),{key:0,headers:e(d),"active-link":s.activeLink},null,8,["headers","active-link"]))])]),_:3},8,["onBeforeEnter","onBeforeLeave"])]),_:3}))}});var Be=F(ye,[["__scopeId","data-v-6378a484"],["__file","Layout.vue"]]);export{Be as default};
